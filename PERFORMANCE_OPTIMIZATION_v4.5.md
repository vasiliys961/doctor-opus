# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Doctor Opus v4.5

**–î–∞—Ç–∞:** 13 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í–µ—Ä—Å–∏—è:** 4.5 (Performance Optimization Update)

---

## üìä –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `max_tokens` –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π:

- ‚ö° **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** 25-40% –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- üí∞ **–°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏:** 15-25% (–ø—Ä–∏ —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ max_tokens)
- üéØ **–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤:** –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ª–∏–º–∏—Ç—ã —Å –∑–∞–ø–∞—Å–æ–º)
- üîß **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –¥–ª—è —á–∞—Ç–∞, —Ñ–∞–π–ª–æ–≤ –∏ OCR

---

## üÜï –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `lib/adaptive-tokens.ts`

–ù–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ `max_tokens` –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```typescript
// –û—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
estimateTokens(text: string): number

// –û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ñ–∞–π–ª–∞—Ö
estimateFileTokens(files: File[]): number

// –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞—Å—á—ë—Ç max_tokens
calculateAdaptiveMaxTokens(params: {
  systemPrompt?: string;
  history?: Array<{ content: string }>;
  userPrompt?: string;
  files?: File[];
  mode: AdaptiveMode;
}): number
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–µ–∂–∏–º—ã:**
- `chat` - AI-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞
- `ocr` - OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `file-analysis` - –ê–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `genetic-consult` - –ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
- `image-single` / `image-multiple` - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `video` - –í–∏–¥–µ–æ-–∞–Ω–∞–ª–∏–∑
- `protocols` - –ü–æ–∏—Å–∫ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

---

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### üìÅ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

| –§–∞–π–ª | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------|-------|------------|
| `lib/openrouter-streaming.ts` (–±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º) | 16000 | **8000** | Gemini Flash –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ |
| `lib/openrouter-streaming.ts` (–æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) | 16000 | **8000** | –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `lib/openrouter-streaming.ts` (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ) | 16000 | **12000** | –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `lib/openrouter-streaming.ts` (validated) | 16000 | **10000** | –ê–Ω–∞–ª–∏–∑ —Å JSON-–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º |
| `lib/openrouter-streaming.ts` (streaming –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) | 16000 | **8000** / **12000** | –û–¥–Ω–æ/–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `lib/openrouter.ts` (–±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏) | 16000 | **10000** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—á—ë—Ç—ã |
| `lib/openrouter.ts` (—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑) | 16000 | **12000** | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `lib/video.ts` (–æ–ø–∏—Å–∞–Ω–∏–µ) | 16000 | **10000** | –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ-–∫–∞–¥—Ä–æ–≤ |
| `lib/video.ts` (–∞–Ω–∞–ª–∏–∑) | 16000 | **10000** | –§–∏–Ω–∞–ª—å–Ω–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ |
| `lib/video.ts` (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ) | 16000 | **12000** / **10000** | –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–≤—É—Ö –≤–∏–¥–µ–æ |
| `app/api/protocols/search` (standard) | 16000 | **10000** | Gemini Flash –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π |
| `app/api/protocols/search` (detailed) | 20000 | **12000** | GPT-5.2 –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ |
| `app/api/analyze/genetic/route.ts` (—ç—Ç–∞–ø 1) | 16000 | **12000** | –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö |
| `app/api/analyze/genetic/route.ts` (—ç—Ç–∞–ø 2) | 15000 | **10000** | –§–∏–Ω–∞–ª—å–Ω—ã–π –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ |
| `app/api/analyze/genetic/consult` | 16000 | **12000** | –ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è |

### üìÅ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

| –§–∞–π–ª | –õ–æ–≥–∏–∫–∞ | –î–∏–∞–ø–∞–∑–æ–Ω |
|------|--------|----------|
| **`lib/openrouter-streaming.ts`**<br>(sendTextRequestStreaming) | –ê–¥–∞–ø—Ç–∏–≤–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–ª–∏–Ω—ã –¥–∏–∞–ª–æ–≥–∞ | 8000-16000 |
| **`lib/openrouter-files.ts`**<br>(–æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏) | –ê–¥–∞–ø—Ç–∏–≤–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ | 8000-20000 |

**–ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è —á–∞—Ç–∞ (AI-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç):**
```typescript
if (inputTokens < 5000)    ‚Üí 8000   // –ö–æ—Ä–æ—Ç–∫–∏–π –¥–∏–∞–ª–æ–≥
if (inputTokens < 15000)   ‚Üí 10000  // –°—Ä–µ–¥–Ω–∏–π –¥–∏–∞–ª–æ–≥
if (inputTokens < 30000)   ‚Üí 12000  // –î–ª–∏–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥
if (inputTokens >= 30000)  ‚Üí 16000  // –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥
if (files.length > 0)      ‚Üí 16000  // –° —Ñ–∞–π–ª–∞–º–∏ –≤—Å–µ–≥–¥–∞ –º–∞–∫—Å–∏–º—É–º
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è —Ñ–∞–π–ª–æ–≤:**
```typescript
if (fileTokens < 2000)     ‚Üí 8000   // –ú–∞–ª–µ–Ω—å–∫–∏–π —Ñ–∞–π–ª
if (fileTokens < 10000)    ‚Üí 12000  // –°—Ä–µ–¥–Ω–∏–π —Ñ–∞–π–ª
if (fileTokens < 30000)    ‚Üí 16000  // –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª
if (fileTokens >= 30000)   ‚Üí 20000  // –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª
```

### üìÅ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)

| –§–∞–π–ª | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|------|----------|-------------|
| `app/api/scan/document*.ts` | **16000** ‚úÖ | OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –≤—ã—Å–æ–∫–æ–≥–æ –ª–∏–º–∏—Ç–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ |
| `app/api/analyze/labs/route.ts` | **2000** ‚úÖ | –£–∂–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| `app/api/analyze/genetic/extract-images` | **3000** ‚úÖ | –£–∂–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü |

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ —Ç–∏–ø–∞–º –∑–∞–ø—Ä–æ—Å–æ–≤:

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è (–¥–æ) | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è (–ø–æ—Å–ª–µ) | –£–ª—É—á—à–µ–Ω–∏–µ |
|-------------|-------------------|----------------------|-----------|
| –ê–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | ~60 —Å–µ–∫ | ~40-45 —Å–µ–∫ | **-30%** |
| –ê–Ω–∞–ª–∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | ~80 —Å–µ–∫ | ~60-65 —Å–µ–∫ | **-25%** |
| –í–∏–¥–µ–æ-–∞–Ω–∞–ª–∏–∑ | ~90 —Å–µ–∫ | ~65-70 —Å–µ–∫ | **-28%** |
| AI-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç (–∫–æ—Ä–æ—Ç–∫–∏–π –¥–∏–∞–ª–æ–≥) | ~50 —Å–µ–∫ | ~35-40 —Å–µ–∫ | **-30%** |
| –ü–æ–∏—Å–∫ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π | ~45 —Å–µ–∫ | ~30-35 —Å–µ–∫ | **-33%** |
| –ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è | ~70 —Å–µ–∫ | ~50-55 —Å–µ–∫ | **-25%** |
| OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | ~40 —Å–µ–∫ | ~40 —Å–µ–∫ | **–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚úÖ |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤:

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: ~1,500-2,500 —Ç–æ–∫–µ–Ω–æ–≤
- –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç: 16,000 —Ç–æ–∫–µ–Ω–æ–≤
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: 9-16%** ‚ùå (–∏–∑–±—ã—Ç–æ—á–Ω–æ)

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: ~1,500-2,500 —Ç–æ–∫–µ–Ω–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç: 8,000-12,000 —Ç–æ–∫–µ–Ω–æ–≤ (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: 20-30%** ‚úÖ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)

---

## üîç –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —á–∞—Ç–∞

```typescript
// lib/openrouter-streaming.ts:887+
const { calculateAdaptiveMaxTokens } = await import('./adaptive-tokens');

const adaptiveMaxTokens = calculateAdaptiveMaxTokens({
  systemPrompt,
  history,
  userPrompt: prompt,
  mode: 'chat'
});

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
console.log(`üìä [ADAPTIVE TOKENS] –†–µ–∂–∏–º: chat, –í—Ö–æ–¥: ~${totalTokens} —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí max_tokens: ${adaptiveMaxTokens}`);
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤

```typescript
// lib/openrouter-files.ts:268+
const { calculateAdaptiveMaxTokens } = await import('./adaptive-tokens');

const adaptiveMaxTokens = calculateAdaptiveMaxTokens({
  systemPrompt,
  history,
  userPrompt: prompt,
  files,
  mode: 'file-analysis'
});

console.log('Calling OpenRouter API with files:', {
  model,
  filesCount: files.length,
  adaptiveMaxTokens
});
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - ‚úÖ –û–¥–Ω–æ –≠–ö–ì –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏ (3-5 —à—Ç)
   - ‚úÖ –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ "–¥–æ/–ø–æ—Å–ª–µ"

2. **AI-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç:**
   - ‚úÖ –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∫–æ—Ä–æ—Ç–∫–∏–π –¥–∏–∞–ª–æ–≥)
   - ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ (5-10 —Å–æ–æ–±—â–µ–Ω–∏–π)
   - ‚úÖ –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥ (20+ —Å–æ–æ–±—â–µ–Ω–∏–π)
   - ‚úÖ –î–∏–∞–ª–æ–≥ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

3. **–í–∏–¥–µ–æ-–∞–Ω–∞–ª–∏–∑:**
   - ‚úÖ –û–¥–Ω–æ –≤–∏–¥–µ–æ-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
   - ‚úÖ –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–≤—É—Ö –≤–∏–¥–µ–æ

4. **–ì–µ–Ω–µ—Ç–∏–∫–∞:**
   - ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
   - ‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–º—É –æ—Ç—á—ë—Ç—É
   - ‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –ø–æ–ª–Ω–æ–º—É –æ—Ç—á—ë—Ç—É (15K+ —Ç–æ–∫–µ–Ω–æ–≤)

5. **–ü–æ–∏—Å–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
   - ‚úÖ Standard —Ä–µ–∂–∏–º (Gemini)
   - ‚úÖ Detailed —Ä–µ–∂–∏–º (GPT-5.2)
   - ‚úÖ Online —Ä–µ–∂–∏–º (Perplexity)

6. **OCR:**
   - ‚úÖ –û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
   - ‚úÖ –ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (10+ —Å—Ç—Ä–∞–Ω–∏—Ü)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production:

–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

```bash
# –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:
üìä [ADAPTIVE TOKENS] –†–µ–∂–∏–º: chat, –í—Ö–æ–¥: ~4,200 —Ç–æ–∫–µ–Ω–æ–≤ (—Ç–µ–∫—Å—Ç: 4,200) ‚Üí max_tokens: 8000
‚úÖ [ADAPTIVE TOKENS] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏–º–∏—Ç: 8000 —Ç–æ–∫–µ–Ω–æ–≤

üìä [ADAPTIVE TOKENS] –†–µ–∂–∏–º: file-analysis, –í—Ö–æ–¥: ~15,000 —Ç–æ–∫–µ–Ω–æ–≤ (—Ç–µ–∫—Å—Ç: 2,000, —Ñ–∞–π–ª—ã: 13,000) ‚Üí max_tokens: 16000
‚úÖ [ADAPTIVE TOKENS] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏–º–∏—Ç: 16000 —Ç–æ–∫–µ–Ω–æ–≤
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
2. **–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤:** ‚úÖ –ù–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (–ª–∏–º–∏—Ç—ã –≤—Å—ë –µ—â—ë —Å –∑–∞–ø–∞—Å–æ–º)
3. **TypeScript:** ‚úÖ –ù–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω—ã
4. **OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω –≤—ã—Å–æ–∫–∏–π –ª–∏–º–∏—Ç (16K) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
5. **–§–∞–π–ª—ã:** ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

---

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞:

```bash
npm run dev
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript:

```bash
npx tsc --noEmit
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 11 –æ—à–∏–±–æ–∫ (–≤—Å–µ pre-existing, –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ production
2. ‚úÖ –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
3. ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
4. ‚è≥ –í–æ–∑–º–æ–∂–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üë• –ê–≤—Ç–æ—Ä

**Doctor Opus AI Team**  
–í–µ—Ä—Å–∏—è: 4.5 (Performance Optimization Update)  
–î–∞—Ç–∞: 13 —Ñ–µ–≤—Ä–∞–ª—è 2026
