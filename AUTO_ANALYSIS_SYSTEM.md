# 🤖 Автоматизированная система анализа feedback

## 📊 Простые ответы на ваши вопросы

### 1. Где сейчас ваши данные?
✅ **Локально на вашем MacBook:**
- `medical_data.db` - база данных со всеми отзывами
- `data/raw_feedback/` - JSON файлы с сырыми отзывами

### 2. Можно ли автоматизировать анализ?
✅ **ДА!** Создана автоматическая система:
- После **10 тестов** по каждому типу → автоматический анализ
- После **25 анализов** → предложения по оптимизации промптов
- После **1000 тестов** → предложение скачать и проанализировать локально

### 3. Объем данных:

**1000 тестов:**
- База данных: ~5-10 МБ
- JSON файлы: ~2-5 МБ
- Анонимизированные: ~1-3 МБ
- **ИТОГО: ~8-18 МБ** (не критично для MacBook)

**10000 тестов:**
- База данных: ~50-100 МБ
- JSON файлы: ~20-50 МБ  
- Анонимизированные: ~10-30 МБ
- **ИТОГО: ~80-180 МБ** (не критично, GitHub репозиторий может быть до 1 ГБ)

### 4. Где база на GitHub?
✅ **В вашем репозитории:**
- Путь: `data/anonymized_cases/*.jsonl`
- Можно коммитить и пушить
- Доступна с любого устройства через `git pull`

---

## 🔄 Автоматизированный процесс

```
┌─────────────────┐
│  Врач оставляет │
│   10 отзывов    │
│   (по типу)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Автоматический │
│  анализ данных  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Предложение:   │
│  "Проанализи-   │
│  ровать 10      │
│  отзывов?"      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Результат:     │
│  - Топ ошибок   │
│  - Рекомендации │
└─────────────────┘

         │
         ▼
┌─────────────────┐
│  25+ анализов   │
│  накоплено      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Предложения по │
│  оптимизации    │
│  промптов       │
└─────────────────┘

         │
         ▼
┌─────────────────┐
│  1000+ тестов   │
│  (локально или  │
│  на GitHub)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Предложение:   │
│  "Скачать и     │
│  проанализиро-  │
│  вать локально" │
└─────────────────┘
```

---

## 📋 Порядок действий

### Этап 1: Накопление данных (автоматически)
- Врачи оставляют отзывы через форму
- Данные сохраняются в БД и JSON файлы
- Система считает количество

### Этап 2: Автоматический анализ (после 10 тестов)
- Система проверяет: есть ли 10+ отзывов по типу?
- Показывает уведомление при запуске приложения
- Предлагает: "Проанализировать накопленные отзывы?"
- Запускает анализ и показывает результаты

### Этап 3: Предложения по оптимизации (после 25 анализов)
- Система анализирует паттерны ошибок
- Предлагает изменения в промптах
- Показывает где можно улучшить структуру

### Этап 4: Массовый анализ (после 1000 тестов)
- Система проверяет количество на GitHub или локально
- Предлагает: "Скачать данные с GitHub и проанализировать?"
- Запускает глубокий анализ
- Формирует отчет с предложениями по оптимизации

---

## 🎯 Практическая реализация

Все это уже реализовано в коде! Система будет работать автоматически.

**Файлы системы:**
- `feedback/analyzer.py` - анализ feedback
- `scripts/auto_analyze.py` - автоматический анализ (создается)
- `app.py` - проверка при запуске приложения

---

## 💾 Объемы данных (детально)

### 1 отзыв ≈:
- В БД: ~5-10 КБ (текст, метаданные)
- JSON файл: ~2-5 КБ
- Анонимизированный: ~1-3 КБ

### Расчеты:

| Количество | БД (МБ) | JSON (МБ) | Аноним (МБ) | ИТОГО (МБ) |
|------------|---------|-----------|-------------|------------|
| 100 тестов | 0.5-1   | 0.2-0.5   | 0.1-0.3     | ~1-2 МБ    |
| 1000 тестов| 5-10    | 2-5       | 1-3         | ~8-18 МБ   |
| 10000 тестов| 50-100  | 20-50     | 10-30       | ~80-180 МБ |

**Вывод:** Даже 10000 тестов = ~180 МБ максимум (это примерно 1-2 минуты видео)

### GitHub ограничения:
- Репозиторий: до 1 ГБ (бесплатно)
- Файл: до 100 МБ
- **10000 тестов поместятся легко!**

---

## 📍 Где база на GitHub?

**Путь в репозитории:**
```
ваш-репозиторий/
  └── data/
      └── anonymized_cases/
          ├── cases_20251207.jsonl  ← здесь
          ├── cases_20251208.jsonl
          └── cases_20251209.jsonl
```

**Как получить с другого устройства:**
```bash
git pull
# Или
git clone <ваш-репозиторий>
cd <репозиторий>
# Данные будут в data/anonymized_cases/
```

---

## ✅ Ответы на ваши вопросы:

1. **Локально результаты УЖЕ в компьютере?** 
   ✅ ДА, в `medical_data.db` и `data/raw_feedback/`

2. **Смогу включить анализ?**
   ✅ ДА, через `python scripts/get_feedback_data.py` или автоматически

3. **Автоматизировать процесс?**
   ✅ ДА, создана система автоанализа (см. ниже)

4. **Объем 1000 тестов?**
   ✅ ~8-18 МБ (не сожрут память)

5. **Объем 10000 тестов на GitHub?**
   ✅ ~80-180 МБ (не обвалит репозиторий, лимит 1 ГБ)

6. **Где база на GitHub?**
   ✅ `data/anonymized_cases/*.jsonl` в вашем репозитории

7. **Автоматическое предложение после 1000 тестов?**
   ✅ ДА, система будет предлагать при запуске

---

## 🚀 Следующие шаги

Система автоматического анализа создается. После реализации:
- При запуске приложения проверяется количество отзывов
- Если ≥10 → показывается предложение проанализировать
- Если ≥25 → показываются предложения по оптимизации
- Если ≥1000 → предлагается скачать с GitHub и проанализировать

**Всё автоматически!** Вам нужно только нажать "Да" когда система предложит.









