"""
Общие части промптов для устранения повторяемости
Используются во всех специализированных промптах диагностики
Эти части импортируются и вставляются в специализированные промпты
"""

# === ОБЩИЕ ИНСТРУКЦИИ ПО ФОРМАТУ ОТВЕТА ===
COMMON_FORMAT_REQUIREMENTS = """
Игнорируй требования о таблицах ссылок и логах веб‑поиска: ссылки и логи НЕ НУЖНЫ в ответе.
Не используй табличный формат (строки/столбцы с «Параметр / Значение»); все параметры описывай в виде структурированного текста и списков.

ВАЖНО: 
- ФОКУС НА ДИАГНОСТИКЕ: минимизируй описательную часть, максимально концентрируйся на выявлении патологий и постановке диагноза.
- Делай заключение КОМПАКТНЫМ. НЕ перечисляй отсутствующие патологии. Указывай только реально выявленные отклонения.
- НЕ описывай нормальные параметры подробно. Если параметр в норме — либо кратко упомяни, либо пропусти.
- ВСЕ заключения должны быть сформулированы от лица профессора клинической медицины (через system_prompt).
"""

# === СТРУКТУРА КЛИНИЧЕСКОГО ЗАКЛЮЧЕНИЯ ===
COMMON_CLINICAL_CONCLUSION = """
6. КЛИНИЧЕСКОЕ ЗАКЛЮЧЕНИЕ (компактно):
   1) Клинический обзор (2–3 предложения: суть и срочность).
   2) Основной диагноз с кодом ICD‑10 (только наиболее вероятный, без длинного дифференциального списка).
   3) План действий (кратко):
      - Неотложные действия (только если нужны).
      - Дальнейшая диагностика (3–5 ключевых исследований).
      - Терапия (без выдуманных дозировок).
      - Мониторинг и «красные флаги» (только при необходимости).

Если данных недостаточно для уверенного вывода, прямо укажи степень неопределённости и какие обследования нужны для уточнения. 
Не придумывай диагноз при отсутствии достаточных признаков.

7. КРАТКОЕ РЕЗЮМЕ (в конце заключения):
   - Краткое резюме ключевых находок (1–2 предложения).
   - Наиболее вероятный диагноз с кодом ICD‑10 (один, самый вероятный).
"""

# === ТРЕБОВАНИЯ К УКАЗАНИЮ ТОЛЬКО НАЙДЕННЫХ ПАТОЛОГИЙ ===
COMMON_ONLY_FOUND_PATHOLOGIES = """
- Указывай ТОЛЬКО реально выявленные патологические изменения.
- НЕ перечисляй отсутствующие патологии (например, не пиши "Нет признаков ГЛЖ", "Нет признаков ишемии" и т.п.).
- Если патологии нет — просто пропусти этот раздел или напиши кратко: "Патологических изменений не выявлено".
"""

# === ОБЩИЕ ТРЕБОВАНИЯ К ЛОКАЛИЗАЦИИ (универсальные) ===
COMMON_LOCALIZATION_REQUIREMENTS = """
ВАЖНО:
- Всегда указывай ТОЧНУЮ локализацию патологии (какая структура, какая часть, сторона)
- Указывай размеры образований (в мм или см)
- Описывай контуры (четкие, нечеткие, ровные, неровные)
- Используй международную терминологию
"""

# === ШАБЛОН ОПИСАНИЯ ОБРАЗОВАНИЙ/ОЧАГОВ (универсальный) ===
COMMON_FINDING_TEMPLATE = """
Для КАЖДОГО очага/образования:
- Локализация (точная анатомическая структура, сторона)
- Размер: X × Y × Z мм (или диаметр для округлых)
- Количество: единичное / множественные
- Форма, контуры
- Характеристики (зависят от типа исследования)
- Внутренняя структура
- Окружающие ткани
"""

# === ФОРМАТ ЗАКЛЮЧЕНИЯ ДЛЯ ВИДЕО (базовый, для эндоскопии) ===
COMMON_VIDEO_CONCLUSION = """
ЗАКЛЮЧЕНИЕ:
1. Список всех находок с timestamps (если применимо)
2. Диагноз по МКБ-10 (если применимо)
3. Рекомендации по дальнейшей тактике
4. Срочность (плановое наблюдение / требует внимания / экстренная ситуация)
"""

# === ФОРМАТ ЗАКЛЮЧЕНИЯ ДЛЯ ВИДЕО МРТ/КТ ===
COMMON_VIDEO_MRI_CT_CONCLUSION = """
ЗАКЛЮЧЕНИЕ:
1. МР-КАРТИНА/КТ-КАРТИНА: [основной диагноз]
2. ДИФФЕРЕНЦИАЛЬНЫЙ ДИАГНОЗ (если неоднозначно)
3. РЕКОМЕНДАЦИИ: [детальные рекомендации по дальнейшим действиям]
4. СРОЧНОСТЬ: плановое наблюдение / требует внимания / ЭКСТРЕННАЯ ситуация
"""

# === ФОРМАТ ЗАКЛЮЧЕНИЯ ДЛЯ ВИДЕО УЗИ ===
COMMON_VIDEO_ULTRASOUND_CONCLUSION = """
ЗАКЛЮЧЕНИЕ:
1. ЭХО-ПРИЗНАКИ: [Диагноз]
2. РЕКОМЕНДАЦИИ: динамика / МРТ / консультация специалиста
3. СРОЧНОСТЬ: плановое наблюдение / требует внимания / экстренная ситуация
"""

# === ОБЩЕЕ ТРЕБОВАНИЕ К TIMESTAMPS В ВИДЕО ===
COMMON_VIDEO_TIMESTAMPS_REQUIREMENT = """
ВАЖНО: Указывай точные timestamps ([MM:SS]) для всех патологических находок!
"""

# === ОБЩИЕ ТРЕБОВАНИЯ К ОПИСАНИЮ ДЛЯ РЕНТГЕНОГРАФИИ ===
COMMON_XRAY_REQUIREMENTS = """
ВАЖНО:
- Всегда указывай ТОЧНУЮ локализацию патологии (какая кость, какая часть, сторона)
- Для суставов: описывай изменения в ОБЕИХ суставных поверхностях
- Для переломов: указывай тип, смещение, вовлечение сустава
- Для опухолей: описывай характер деструкции, периостальную реакцию, мягкотканный компонент
- Используй международную терминологию (например, "субхондральный склероз", "остеофиты", "эрозии")
"""

# === ОБЩИЕ ТРЕБОВАНИЯ К ОПИСАНИЮ ДЛЯ МРТ ===
COMMON_MRI_REQUIREMENTS = """
ВАЖНО:
- Всегда указывай последовательности (T1, T2, FLAIR, DWI, SWI, STIR)
- Описывай сигнал патологии в каждой последовательности
- Указывай локализацию (доля, сегмент, сторона)
- Оценивай масс-эффект, отек, контрастное усиление
"""

# === ОБЩИЕ ТРЕБОВАНИЯ К ОПИСАНИЮ ДЛЯ УЗИ ===
COMMON_ULTRASOUND_REQUIREMENTS = """
ВАЖНО:
- Всегда указывай эхогенность (анэхогенная, гипо-, изо-, гиперэхогенная)
- Описывай структуру (однородная, неоднородная)
- Указывай размеры образований (в мм или см)
- Оценивай контуры (четкие, нечеткие, ровные, неровные)
- Используй допплер для оценки васкуляризации
- Для образований: описывай форму, контуры, внутреннюю структуру, наличие кальцинатов
"""

# === ДОПОЛНИТЕЛЬНЫЕ ОБЩИЕ ЧАСТИ ДЛЯ ВИДЕО ===

# Формат заключения для МРТ/КТ видео
COMMON_VIDEO_MRI_CT_CONCLUSION = """
ЗАКЛЮЧЕНИЕ:
1. МР-КАРТИНА/КТ-КАРТИНА: [основной диагноз]
2. ДИФФЕРЕНЦИАЛЬНЫЙ ДИАГНОЗ (если неоднозначно)
3. РЕКОМЕНДАЦИИ: [детальные рекомендации]
4. СРОЧНОСТЬ: плановое наблюдение / требует внимания / ЭКСТРЕННАЯ ситуация
"""

# Формат заключения для УЗИ видео
COMMON_VIDEO_ULTRASOUND_CONCLUSION = """
ЗАКЛЮЧЕНИЕ:
1. ЭХО-ПРИЗНАКИ: [Диагноз]
2. РЕКОМЕНДАЦИИ: динамика / МРТ / консультация специалиста
3. СРОЧНОСТЬ: плановое наблюдение / требует внимания / экстренная ситуация
"""

# Требование к timestamps в видео
COMMON_VIDEO_TIMESTAMPS_REQUIREMENT = """
ВАЖНО: Указывай точные timestamps ([MM:SS]) для всех патологических находок!
"""

